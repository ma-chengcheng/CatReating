<!DOCTYPE html>
<html ng-app="app">
	<head>
		<meta charset="utf-8">
		<meta name="viewport" content="width=device-width,initial-scale=0.36,user-scalable=no,minimal-ui">
		<meta name="format-detection" content="telephone=no">
		<link rel="stylesheet" href="/static/src/css/reset.css">
		<link rel="stylesheet" href="/static/src/css/main.css">
		<title>猫阅读</title>
	</head>
	<body>
		<div id="root">
			<div class="header" id="header">
				<div class="headerFirst">
					<div class="headerLogo">
							.<!-- 网站logo -->
					</div>
					<div class="headerNav">
						<a href="#">首页</a>
						<a href="/library/">书库</a>
						<a href="/rank/">排行</a>
						<a href="/payContail/">充值</a>
					</div>
				</div>
				{% if not request.user.is_authenticated %}
				<div class="headerLogin" id="headerLogin">
					<a href="/login/" class="loginText">登陆</a>
					<a href="#"><img src="/static/src/img/icon/wechat.jpg"></a>
					<a href="#"><img src="/static/src/img/icon/qq.jpg"></a>
					<a href="#"><img src="/static/src/img/icon/baidu.jpg"></a>
					<a href="#"><img src="/static/src/img/icon/weibo.jpg"></a>
				</div>
				{% else %}
				<div class="headerLogin" id="headerLogin">
					<a href="/center/"><img src="/static/src/img/icon/writter.jpg"></a>
				</div>
				{% endif %}
			</div>
			<!-- header结束 -->
			<div class="middle">
				<div class="content" id="content">
					<div class="contentSearch" id="contentSearch">
						<form class="search">
							<input type="text" class="searchText" placeholder='输入书号或书名'/>
							<input type="submit" class="searchButton" value='搜 书'/>
						</form>
						<a href="#">上门女婿</a>
						<a href="#">活色生香</a>
						<a href="#">鬼迷心窍</a>
						<a href="#">匹夫</a>
					</div>
					<div class="showImg clearfix" id="showImg">
						<a v-for="content in contents" v-bind:href="'/books/'+content.id">
							<img v-bind:src="'/static/coverImg/' + content.coverImg" v-bind:alt="content.name">
							[[ content.bookName ]]
						</a>
					</div>
					<div class="module"  id="hotModule">
						<div class="module-header">
							<div class="module-header-l">
								<h3 class="module-title titleHot">热门推荐</h3>
							</div>
							<!--<div class="module-header-r">-->
								<!--<a href="#"></a>-->
							<!--</div>-->
						</div>

						<ul class="book-ul">
							<li class="book-li">
								<a v-bind:href="'/books/'+hots.id">		<!-- 链接 -->
									<div class="bookImg">
										<img v-bind:src="'/static/coverImg/'+hots.coverImg" v-bind:alt="hots.name">
									</div>
									<div class="book-cell">
										<h4 class="book-title"> [[ hots.bookName ]] </h4>
										<p class="book-desc"> [[ hots.describe ]] </p>
										<div class="book-meta clearfix">
											<div class="book-meta-l">
												<span class="book-author"> [[ hots.author ]] </span>
											</div>
											<div class="book-meta-r">
													<em class="book-tag"> [[ hots.type ]] </em>
											</div>
										</div>
									</div>
								</a>
							</li>
							<li class="book-list"  v-for="hot in hots.bookList">
								<a v-bind:href="'/books/'+hot.type"><span v-text=" '[' + hot.type + ']' "></span></a>
								<a v-bind:href="'/books/'+hot.id"> [[hot.testimonials]][[ hot.bookName ]] </a>
							</li>
						</ul>
					</div>
					<!-- module01结束 -->
					<a href="#" class="book-adv">
						<img src="/static/src/img/advertise01.jpg">
					</a>

					<div class="module" id="freeModule">
						<div class="module-header">
							<div class="module-header-l">
								<h3 class="module-title titleFree">免费精品</h3>
							</div>
							<!--<div class="module-header-r">-->
								<!--<a href="#"></a>-->
							<!--</div>-->
						</div>`

						<ul class="book-ul">
							<li class="book-li">
								<a v-bind:href="'/books/'+frees.id">		<!-- 链接 -->
									<div class="bookImg">
										<img v-bind:src="'/static/coverImg/'+frees.coverImg" v-bind:alt="frees.name">
									</div>
									<div class="book-cell">
										<h4 class="book-title"> [[ frees.bookName ]] </h4>
										<p class="book-desc"> [[ frees.describe ]] </p>
										<div class="book-meta clearfix">
											<div class="book-meta-l">
												<span class="book-author"> [[ frees.author ]] </span>
											</div>
											<div class="book-meta-r">
													<em class="book-tag"> [[ frees.type ]] </em>
											</div>
										</div>
									</div>
								</a>
							</li>
							<li class="book-list"  v-for="free in frees.bookList">
								<span v-text=" '[' + free.type + ']' "></span>
								<a v-bind:href="'/books/'+free.id">  [[free.testimonials]][[ free.bookName ]] </a>
							</li>
						</ul>
					</div>
					<!-- module02结束 -->

					<div class="module" id="groundModule">
						<div class="module-header">
							<div class="module-header-l">
								<h3 class="module-title titleTop">上架精品</h3>
							</div>
							<!--<div class="module-header-r">-->
								<!--<a href="#"></a>-->
							<!--</div>-->
						</div>
						<ul class="book-ul">
							<li class="book-li">
								<a v-bind:href="'/books/'+grounds.id">
									<div class="bookImg">
										<img v-bind:src="'/static/coverImg/'+grounds.coverImg" v-bind:alt="grounds.name">
									</div>
									<div class="book-cell">
										<h4 class="book-title"> [[ grounds.bookName ]] </h4>
										<p class="book-desc"> [[ grounds.describe ]] </p>
										<div class="book-meta clearfix">
											<div class="book-meta-l">
												<span class="book-author"> [[ grounds.author ]] </span>
											</div>
											<div class="book-meta-r">
													<em class="book-tag"> [[ grounds.type ]] </em>
											</div>
										</div>
									</div>
								</a>
							</li>
							<li class="book-list"  v-for="ground in grounds.bookList">
								<span v-text=" '[' + ground.type + ']' "></span>
								<a v-bind:href="'/books/'+ground.id">  [[ground.testimonials]][[ ground.bookName ]] </a>
							</li>
						</ul>
					</div>
					<!-- module03结束 -->
					<a href="#" class="book-adv">
						<img src="/static/src/img/advertise02.jpg">
					</a>

					<div class="module" id="newModule">
						<div class="module-header">
							<div class="module-header-l">
								<h3 class="module-title titleNew">新书推荐</h3>
							</div>
							<div class="module-header-r">
								<a href="#"></a>
							</div>
						</div>
						<ul class="book-ul">
							<li class="bookNew clearfix">
								<a v-bind:href="'/books/'+news.id" v-for="news in news.imgList">
									<img v-bind:src="'/static/coverImg/'+news.coverImg">
									<p> [[ news.bookName ]] </p>
								</a>
							</li>
							<li class="book-list" v-for="news in news.bookList">
								<span v-text=" '[' + news.type + ']' "></span>
								<a v-bind:href="'/books/'+news.id"> [[ news.bookName ]] </a>
							</li>
						</ul>
					</div>
					<!-- module04结束 -->
					<div class="rank" id="rank">
						<div class="rankHeader clearfix">
							<span index="0" class="item active" id="rankClick" v-on:click="rankClick">点击榜</span>
       						<span index="1" class="item" id="rankPay" v-on:click="rankPay">订阅榜</span>
      						<span index="2" class="item" id="rankRun" v-on:click="rankRun">追书榜</span>
						</div>
						<div class="rankList">
							<ul class="list" style="display: block ;" id="listClick">
								<li v-for="(clicks, index) in clicks">
									<span v-bind:class="{'t count': index<3, 'count': index>2 }"> [[ index + 1 ]] </span>
									<a v-bind:href="'/books/'+clicks.id"> [[ clicks.bookName ]] </a>
								</li>
        					</ul>
        					<ul class="list" style="display: none;" id="listPay">
								<li v-for="(pay, index) in pays">
									<span v-bind:class="{'t count': index<3, 'count': index>2 }"> [[ index + 1 ]] </span>
									<a v-bind:href="'/books/'+pay.id"> [[ pay.bookName ]] </a>
								</li>
        					</ul>
        					<ul class="list" style="display: none;" id="listRun">
								<li v-for="(run, index) in runs">
									<span v-bind:class="{'t count': index<3, 'count': index>2 }"> [[ index + 1 ]] </span>
									<a v-bind:href="'/books/'+run.id"> [[ run.bookName ]] </a>
								</li>
        					</ul>
						</div>
					</div>
					<!-- rank结束 -->
				</div>
				<!-- content结束 -->
			</div>
			<!-- middle结束 -->
			<div class="footer">
				<p class="footerTit">关于猫阅读  联系我们</p>
				<p class="footerTxt">客服邮箱：maoyuedu@maoyuedu.com</p>
				<p class="footerTxt">客服电话：010-12345678</p>
				<p class="footerTxt">客服QQ：123456789</p>
				<p class="footerTxt">京ICP证123456号 京ICP备123456号-1</p>
				<p class="footerTxt">Copyright © 2017 maoyd.com All rights reserved.</p>
			</div>
			<!-- footer结束 -->
		</div>
		<!-- root结束 -->
		<script src="/static/src/js/lib/zepto.min.js"></script>
		<script src="/static/src/js/lib/vue.js"></script>
		<script src="/static/src/js/util/booktype.js"></script>
		<script>
			/*var rankClick = $('#rankClick');
			var rankPay = $('#rankPay');
			var rankRun = $('#rankRun');
			var listClick = $('#listClick');
			var listPay = $('#listPay');
			var listRun = $('#listRun');
			rankClick.click(function(){
				if(listClick.css('display') == "none"){
					listClick.show().siblings().hide();
					rankClick.addClass("active").siblings().removeClass("active");
				}
			})
			rankPay.click(function(){
				if(listPay.css('display') == "none"){
					listPay.show().siblings().hide();
					rankPay.addClass("active").siblings().removeClass("active");
				}
			})
			rankRun.click(function(){
				if(listRun.css('display') == "none"){
					listRun.show().siblings().hide();
					rankRun.addClass("active").siblings().removeClass("active");
				}
			})*/
			var urlShowImg = "/ShowImgViewAPI/";
			var urlhotRecommend = "/HotRecommendViewAPI/";
			var urlfreeCompetitive = "/FreeCompetitiveViewAPI/";
			var urlgroundCompetitive = "/GroundCompetitiveViewAPI/";
			var urlNewRecommend = "/NewRecommendViewAPI/";
			var urlRank = "/RankListViewAPI/";
			$.get(urlShowImg, {"firstPage": "true"}, function(data){
					data = $.parseJSON(data);
					//数据绑定
					var showImg = new Vue({			//展示图片区
						delimiters: ['[[', ']]'],
						el: "#showImg",
						data: {
							contents: data.showImg
						}
					})
			})

			$.get(urlhotRecommend, {"firstPage": "true"}, function(data){
					//数据绑定
					data = $.parseJSON(data);
					<!--console.log(data.ty);-->
					var hotRecommend = new Vue({			//热门推荐区
						delimiters: ['[[', ']]'],
						el: "#hotModule",
						data: {
							hots: data.hotRecommend
						}
					})
			})

			$.get(urlfreeCompetitive, {"firstPage": "true"}, function(data){
					//数据绑定
				    data = $.parseJSON(data);
					var freeCompetitive = new Vue({			//免费精品区
						delimiters: ['[[', ']]'],
						el: "#freeModule",
						data: {
							frees: data.freeCompetitive
						}
					})
			})

			$.get(urlgroundCompetitive, {"firstPage": "true"}, function(data){
					//数据绑定
					data = $.parseJSON(data);
					var groundCompetitive = new Vue({			//上架精品区
						delimiters: ['[[', ']]'],
						el: "#groundModule",
						data: {
							grounds: data.groundCompetitive
						}
					})
			})

			$.get(urlNewRecommend, {"firstPage": "true"}, function(data){
					//数据绑定
				    data = $.parseJSON(data);
					var newRecommend = new Vue({			//新书推荐区
						delimiters: ['[[', ']]'],
						el: "#newModule",
						data: {
							news: data.newRecommend
						}
					})
			})

			$.get(urlRank, {"firstPage": "true"}, function(data){
				    data = $.parseJSON(data);
					//数据绑定
					var rank = new Vue({			//榜单区
						delimiters: ['[[', ']]'],
						el: "#rank",
						data: {
							clicks: data.listClick,
							pays: data.listPay,
							runs: data.listRun
						},
						methods: {
							rankClick: function(){
								var rankClick = $('#rankClick');
								var listClick = $('#listClick');
								if(listClick.css('display') == "none"){
									listClick.show().siblings().hide();
									rankClick.addClass("active").siblings().removeClass("active");
								}
							},
							rankPay: function(){
								var rankPay = $('#rankPay');
								var listPay = $('#listPay');
								if(listPay.css('display') == "none"){
									listPay.show().siblings().hide();
									rankPay.addClass("active").siblings().removeClass("active");
								}
							},
							rankRun: function(){
								var rankRun = $('#rankRun');
								var listRun = $('#listRun');
								if(listRun.css('display') == "none"){
									listRun.show().siblings().hide();
									rankRun.addClass("active").siblings().removeClass("active");
								}
							}
						}
					})
			})
		</script>
	</body>
</html>