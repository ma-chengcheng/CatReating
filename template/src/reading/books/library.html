<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=0.36,user-scalable=no,minimal-ui">
    <meta name="format-detection" content="telephone=no">
    <link rel="stylesheet" href="/static/src/css/reset.css">
    <link rel="stylesheet" href="/static/src/css/main.css">
    <link rel="stylesheet" href="/static/src/css/person.css">
    <link rel="stylesheet" type="text/css" href="/static/src/css/catalogue.css">
    <link rel="stylesheet" type="text/css" href="/static/src/css/library.css">
    <title>书籍详情</title>
</head>

<body style="background: #EFEFEF;">
    <div class="headerFirst">
        <div class="headerLogo">
            <img src="" alt="icon">
        </div>
        <div class="headNav">
            <div class="headerNav">
                <a href="/">首页</a>
                <a href="/library/">书库</a>
                <a href="/rank/">排行</a>
                <a href="/payContail/">充值</a>
            </div>
        </div>
    </div>
    {% if not request.user.is_authenticated %}
    <div class="headerLogin" id="headerLogin">
        <a href="/login/" class="loginText">登陆</a>
        <a href="#"><img src="/static/src/img/icon/wechat.jpg"></a>
        <a href="#"><img src="/static/src/img/icon/qq.jpg"></a>
        <a href="#"><img src="/static/src/img/icon/baidu.jpg"></a>
        <a href="#"><img src="/static/src/img/icon/weibo.jpg"></a>
    </div>
    {% else %}
    <div class="headerLogin" id="headerLogin">
        <a href="/center/"><img src="/static/src/img/icon/writter.jpg"></a>
    </div>
    {% endif %}
    <div class="middle">
        <div class="content" id="content">
            <div style="background: #FFF;">
                <table>
                    <tr>
                        <th>分类:</th>
                        <td id="kind0" v-bind:class="{'clicked': checked}" onclick="chKind(0)">全部</td>
                        <td id="kind1" v-bind:class="{'clicked': checked}" onclick="chKind(1)">悬疑</td>
                        <td id="kind2" v-bind:class="{'clicked': checked}" onclick="chKind(2)">社会</td>
                        <td id="kind3" v-bind:class="{'clicked': checked}" onclick="chKind(3)">情感</td>
                        <td id="kind4" v-bind:class="{'clicked': checked}" onclick="chKind(4)">历史</td>
                        <td id="kind5" v-bind:class="{'clicked': checked}" onclick="chKind(5)">军事</td>
                    </tr>
                    <tr>
                        <th></th>
                        <td id="kind6" v-bind:class="{'clicked': checked}" onclick="chKind(6)">玄幻</td>
                        <td id="kind7" v-bind:class="{'clicked': checked}" onclick="chKind(7)">仙侠</td>
                        <td id="kind8" v-bind:class="{'clicked': checked}" onclick="chKind(8)">游戏</td>
                        <td id="kind9" v-bind:class="{'clicked': checked}" onclick="chKind(9)">科幻</td>
                        <td id="kind10" v-bind:class="{'clicked': checked}" onclick="chKind(10)">同人</td>
                        <td id="kind11" v-bind:class="{'clicked': checked}" onclick="chKind(11)">古言</td>
                    </tr>
                </table>
                <table>
                    <tr>
                        <th>作品字数：</th>
                        <td id="word0" v-bind:class="{'clicked':checked}" onclick="chWord(0)">不限</td>
                        <td id="word1" v-bind:class="{'clicked':checked}" onclick="chWord(1)">30万以下</td>
                        <td id="word2" v-bind:class="{'clicked':checked}" onclick="chWord(2)">30-50万</td>
                    </tr>
                </table>
                <table class="addTable">
                    <tr>
                        <th></th>
                        <td id="word3" v-bind:class="{'clicked': checked}" onclick="chWord(3)">50-100万</td>
                        <td id="word4" v-bind:class="{'clicked': checked}" onclick="chWord(4)">100万以上</td>
                    </tr>
                </table>
                <table>
                    <tr>
                        <th>排序方式：</th>
                        <td id="hot0" v-bind:class="{'clicked': checked}" onclick="chHot(0)">不限</td>
                        <td id="hot1" v-bind:class="{'clicked': checked}" onclick="chHot(1)">周人气</td>
                        <td id="hot2" v-bind:class="{'clicked': checked}" onclick="chHot(2)">月人气</td>
                        <td id="hot3" v-bind:class="{'clicked': checked}" onclick="chHot(3)">总人气</td>
                    </tr>
                    <tr>
                        <th></th>
                        <td id="hot4" v-bind:class="{'clicked': checked}" onclick="chHot(4)">字数</td>
                        <td id="hot5" v-bind:class="{'clicked': checked}" onclick="chHot(5)">总收藏</td>
                    </tr>
                </table>
                <table>
                    <th>更新时间：</th>
                    <td id="time0" v-bind:class="{'clicked': checked}" onclick="chTime(0)">不限</td>
                    <td id="time1" v-bind:class="{'clicked': checked}" onclick="chTime(1)">三日内</td>
                    <td id="time2" v-bind:class="{'clicked': checked}" onclick="chTime(2)">七日内</td>
                    <td id="time3" v-bind:class="{'clicked': checked}" onclick="chTime(3)">一月内</td>
                </table>
                <table>
                    <tr>
                        <th>是否免费</th>
                        <td id="free0" v-bind:class="{'clicked': checked}" onclick="chFree(0)">不限</td>
                        <td id="free1" v-bind:class="{'clicked': checked}" onclick="chFree(1)">免费作品</td>
                        <td id="free2" v-bind:class="{'clicked': checked}" onclick="chFree(2)">收费作品</td>
                    </tr>
                </table>
                <table>
                    <tr>
                        <th>是否完结：</th>
                        <td id="finish0" v-bind:class="{'clicked': checked}" onclick="chFinish(0)">不限</td>
                        <td id="finish1" v-bind:class="{'clicked': checked}" onclick="chFinish(1)">已完结</td>
                        <td id="finish2" v-bind:class="{'clicked': checked}" onclick="chFinish(2)">未完结</td>
                    </tr>
                </table>
                <div class="line"></div>
                <div id="chapter">
                    <div class="chapter" v-for="item in items">
                        <p class="chaptername">[[item.bookName]]</p>
                        <p class="chaptertitle">最新：第[[item.chaptersNumber]]章 [[item.chaptersName]]<span>([[item.updateTime]])</span></p>
                        <p class="chapterinfo">作者：[[item.author]] 字数：<span>[[item.wordNumber]]</span></p>
                    </div>
                </div>
            </div>
            <div class="ctgChoose" id="footer">
                <span class="ctgPre ctgBut" onclick="lastPage()">上一页</span>
                <span class="ctgMore ctgBut">
                            [[ pagesNumber ]] / [[ yeshuNumber ]]页
                            <img src="/static/src/img/icon/caShow.jpg">
                            <select class="ctgSelect" name="items" onchange="jumpPage(this.value)">
                                <option v-for="i in yeshuNumber" class="option">[[ i ]]</option>
                            </select>
                        </span>
                <span class="ctgNext ctgBut" onclick="nextPage()">下一页</span>
            </div>
        </div>
    </div>
    <div class="footer">
        <p class="footerTit">关于猫阅读 联系我们</p>
        <p class="footerTxt">客服邮箱：maoyuedu@maoyuedu.com</p>
        <p class="footerTxt">客服电话：010-12345678</p>
        <p class="footerTxt">客服QQ：123456789</p>
        <p class="footerTxt">京ICP证123456号 京ICP备123456号-1</p>
        <p class="footerTxt">Copyright © 2017 maoyd.com All rights reserved.</p>
    </div>
    <script src="/static/src/js/lib/vue.js"></script>
    <script src="/static/src/js/lib/zepto.min.js"></script>
    <script type="text/javascript">
    var v = new Vue({
        delimiters: ['[[', ']]'], el: "#chapter",
        data: {
            items: [{
                bookId: "",
                bookName: "",
                chaptersNumber: "",
                chaptersName: "",
                updateTime: "",
                author: "",
                wordNumber: ""
            }]
        }
    })


    var f = new Vue({
        delimiters: ['[[', ']]'], el: "#footer",
        data: {
            pagesNumber: 1,
            yeshuNumber: 10
        }
    })

    var kind = new Array();
    for (var i = 0; i < 12; i++) {
        var name = "#kind" + i;
        kind[i] = new Vue({
            delimiters: ['[[', ']]'], el: name,
            data: {
                checked: false

            }
        })
    }
    kind[0].checked = true;
    var bookKind = 0;

    var word = new Array();
    for (var i = 0; i < 5; i++) {
        var name = "#word" + i;
        word[i] = new Vue({
            delimiters: ['[[', ']]'], el: name,
            data: {
                checked: false

            }
        })
    }
    word[0].checked = true;
    var bookWord = 0;

    var hot = new Array();
    for (var i = 0; i < 6; i++) {
        var name = "#hot" + i;
        hot[i] = new Vue({
            delimiters: ['[[', ']]'], el: name,
            data: {
                checked: false

            }
        })
    }
    hot[0].checked = true;
    var bookHot = 0;

    var time = new Array();
    for (var i = 0; i < 4; i++) {
        var name = "#time" + i;
        time[i] = new Vue({
            delimiters: ['[[', ']]'], el: name,
            data: {
                checked: false

            }
        })
    }
    time[0].checked = true;
    var bookTime = 0;

    var free = new Array();
    for (var i = 0; i < 3; i++) {
        var name = "#free" + i;
        free[i] = new Vue({
            delimiters: ['[[', ']]'], el: name,
            data: {
                checked: false

            }
        })
    }
    free[0].checked = true;
    var bookFree = 0;

    var finish = new Array();
    for (var i = 0; i < 3; i++) {
        var name = "#finish" + i;
        finish[i] = new Vue({
            delimiters: ['[[', ']]'], el: name,
            data: {
                checked: false

            }
        })
    }
    finish[0].checked = true;
    var bookFinish = 0;

    function reqestMore() {
        $.get("/LibraryViewAPI/",
        {
            "type": bookKind,
            "wordNumber": bookWord,
            "bookHot": bookHot,
            "updateTime": bookTime,
            "state": bookFinish,
            "bookMoney": bookFree,
            "pagesNumber": f.pagesNumber
        }, function(data) {
            data = $.parseJSON(data);
            v.items = data.list;
            f.yeshuNumber = data.yeshuNumber;
        })
    }

    reqestMore();

    function lastPage() {
        if (f.pagesNumber > 1) {
            f.pagesNumber--;
            reqestMore();
        }
    }

    function nextPage() {
        if (f.pagesNumber < v.yeshuNumber) {
            f.pagesNumber++;
            reqestMore();
        }
    }

    function jumpPage(value) {
        f.pagesNumber = value;
        reqestMore();
    }

    function chKind(num) {
        for (var i = 0; i < 12; i++)
            kind[i].checked = false;
        kind[num].checked = true;
        bookKind = num;
        f.pagesNumber = 1;
        reqestMore();
    }

    function chWord(num) {
        for (var i = 0; i < 5; i++)
            word[i].checked = false;
        word[num].checked = true;
        bookWord = num;
        f.pagesNumber = 1;
        reqestMore();
    }

    function chHot(num) {
        for (var i = 0; i < 6; i++)
            hot[i].checked = false;
        hot[num].checked = true;
        bookHot = num;
        f.pagesNumber = 1;
        reqestMore();
    }

    function chTime(num) {
        for (var i = 0; i < 4; i++)
            time[i].checked = false;
        time[num].checked = true;
        bookTime = num;
        f.pagesNumber = 1;
        reqestMore();
    }

    function chFree(num) {
        for (var i = 0; i < 3; i++)
            free[i].checked = false;
        free[num].checked = true;
        bookFree = num;
        f.pagesNumber = 1;
        reqestMore();
    }

    function chFinish(num) {
        for (var i = 0; i < 3; i++)
            finish[i].checked = false;
        finish[num].checked = true;
        bookFinish = num;
        f.pagesNumber = 1;
        reqestMore();
    }
    </script>
</body>

</html>
